#!/bin/sh
set -e

SRC_BASE=`pwd`

## download source data and parse them into sqlite db files
## no dependencies between data sources, i.e. 
## scripts can be executed in any order

echo "downloading go"
downloading go
cd $SRC_BASE/go/script; sh download.sh
update Gene Ontology from 2026-01-22 to 2025-10-10
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 98 29.9M   98 29.5M    0     0  26.6M      0  0:00:01  0:00:01 --:--:-- 26.6M100 29.9M  100 29.9M    0     0  26.7M      0  0:00:01  0:00:01 --:--:-- 26.7M
echo "finished downloading go"
finished downloading go

# As of Spring 2021 we no longer use UniGene
# echo "downloading unigene"
# cd $SRC_BASE/unigene/script; sh download.sh  
# echo "finished downloading unigene"

echo "downloading gene"
downloading gene
cd $SRC_BASE/gene/script; sh download.sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 3979M    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
update crossreferences from Entrez Gene to other databases from 2024-Sep20 to 2026-Jan22
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 1197M    0 10.4M    0     0  10.1M      0  0:01:57  0:00:01  0:01:56 10.1M 12 1197M   12  145M    0     0  71.0M      0  0:00:16  0:00:02  0:00:14 71.0M 24 1197M   24  292M    0     0  97.3M      0  0:00:12  0:00:03  0:00:09 97.4M 38 1197M   38  464M    0     0   115M      0  0:00:10  0:00:04  0:00:06  115M 52 1197M   52  625M    0     0   124M      0  0:00:09  0:00:05  0:00:04  126M 61 1197M   61  737M    0     0   122M      0  0:00:09  0:00:06  0:00:03  145M 75 1197M   75  904M    0     0   128M      0  0:00:09  0:00:07  0:00:02  152M 86 1197M   86 1033M    0     0   129M      0  0:00:09  0:00:08  0:00:01  148M 97 1197M   97 1162M    0     0   128M      0  0:00:09  0:00:09 --:--:--  139M100 1197M  100 1197M    0     0   128M      0  0:00:09  0:00:09 --:--:--  133M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  7  237M    7 16.7M    0     0  24.3M      0  0:00:09 --:--:--  0:00:09 24.3M 78  237M   78  186M    0     0   111M      0  0:00:02  0:00:01  0:00:01  111M100  237M  100  237M    0     0   122M      0  0:00:01  0:00:01 --:--:--  122M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 2008M    0 14.3M    0     0  17.4M      0  0:01:55 --:--:--  0:01:55 17.4M  7 2008M    7  152M    0     0  89.8M      0  0:00:22  0:00:01  0:00:21 89.8M 14 2008M   14  292M    0     0   108M      0  0:00:18  0:00:02  0:00:16  108M 18 2008M   18  377M    0     0   100M      0  0:00:19  0:00:03  0:00:16  100M 24 2008M   24  491M    0     0   104M      0  0:00:19  0:00:04  0:00:15  104M 29 2008M   29  594M    0     0   104M      0  0:00:19  0:00:05  0:00:14  118M 37 2008M   37  751M    0     0   112M      0  0:00:17  0:00:06  0:00:11  119M 44 2008M   44  891M    0     0   115M      0  0:00:17  0:00:07  0:00:10  119M 50 2008M   50 1021M    0     0   117M      0  0:00:17  0:00:08  0:00:09  129M 56 2008M   56 1141M    0     0   117M      0  0:00:17  0:00:09  0:00:08  130M 62 2008M   62 1250M    0     0   116M      0  0:00:17  0:00:10  0:00:07  131M 68 2008M   68 1383M    0     0   118M      0  0:00:16  0:00:11  0:00:05  126M 76 2008M   76 1531M    0     0   120M      0  0:00:16  0:00:12  0:00:04  127M 82 2008M   82 1653M    0     0   120M      0  0:00:16  0:00:13  0:00:03  126M 87 2008M   87 1754M    0     0   119M      0  0:00:16  0:00:14  0:00:02  121M 93 2008M   93 1870M    0     0   119M      0  0:00:16  0:00:15  0:00:01  123M100 2008M  100 2008M    0     0   121M      0  0:00:16  0:00:16 --:--:--  128M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  4 3979M    4  168M    0     0   153M      0  0:00:25  0:00:01  0:00:24  153M 10 3979M   10  415M    0     0   197M      0  0:00:20  0:00:02  0:00:18  197M 16 3979M   16  656M    0     0   211M      0  0:00:18  0:00:03  0:00:15  211M 22 3979M   22  896M    0     0   218M      0  0:00:18  0:00:04  0:00:14  218M 28 3979M   28 1143M    0     0   224M      0  0:00:17  0:00:05  0:00:12  228M 34 3979M   34 1386M    0     0   227M      0  0:00:17  0:00:06  0:00:11  243M 40 3979M   40 1631M    0     0   229M      0  0:00:17  0:00:07  0:00:10  243M 47 3979M   47 1873M    0     0   231M      0  0:00:17  0:00:08  0:00:09  243M 52 3979M   52 2106M    0     0   231M      0  0:00:17  0:00:09  0:00:08  242M 58 3979M   58 2334M    0     0   231M      0  0:00:17  0:00:10  0:00:07  238M 64 3979M   64 2579M    0     0   232M      0  0:00:17  0:00:11  0:00:06  238M 68 3979M   68 2744M    0     0   226M      0  0:00:17  0:00:12  0:00:05  222M 70 3979M   70 2813M    0     0   212M      0  0:00:18  0:00:13  0:00:05  184M 74 3979M   74 2947M    0     0   207M      0  0:00:19  0:00:14  0:00:05  165M 76 3979M   76 3044M    0     0   201M      0  0:00:19  0:00:15  0:00:04  141M 79 3979M   79 3150M    0     0   195M      0  0:00:20  0:00:16  0:00:04  114M 82 3979M   82 3283M    0     0   191M      0  0:00:20  0:00:17  0:00:03  107M 85 3979M   85 3391M    0     0   187M      0  0:00:21  0:00:18  0:00:03  117M 88 3979M   88 3535M    0     0   185M      0  0:00:21  0:00:19  0:00:02  119M 91 3979M   91 3657M    0     0   181M      0  0:00:21  0:00:20  0:00:01  122M 94 3979M   94 3765M    0     0   178M      0  0:00:22  0:00:21  0:00:01  123M 99 3979M   99 3962M    0     0   179M      0  0:00:22  0:00:22 --:--:--  136M100 3979M  100 3979M    0     0   179M      0  0:00:22  0:00:22 --:--:--  143M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  854k  100  854k    0     0  2296k      0 --:--:-- --:--:-- --:--:-- 2302k
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0 1340M    0 3283k    0     0  7397k      0  0:03:05 --:--:--  0:03:05 7395k 11 1340M   11  155M    0     0   107M      0  0:00:12  0:00:01  0:00:11  107M 24 1340M   24  332M    0     0   136M      0  0:00:09  0:00:02  0:00:07  136M 38 1340M   38  517M    0     0   149M      0  0:00:08  0:00:03  0:00:05  149M 50 1340M   50  677M    0     0   152M      0  0:00:08  0:00:04  0:00:04  152M 64 1340M   64  868M    0     0   159M      0  0:00:08  0:00:05  0:00:03  173M 74 1340M   74  992M    0     0   154M      0  0:00:08  0:00:06  0:00:02  167M 84 1340M   84 1135M    0     0   152M      0  0:00:08  0:00:07  0:00:01  160M 97 1340M   97 1311M    0     0   155M      0  0:00:08  0:00:08 --:--:--  159M100 1340M  100 1340M    0     0   155M      0  0:00:08  0:00:08 --:--:--  158M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  2 1127M    2 33.4M    0     0  42.4M      0  0:00:26 --:--:--  0:00:26 42.4M 21 1127M   21  243M    0     0   136M      0  0:00:08  0:00:01  0:00:07  136M 33 1127M   33  381M    0     0   137M      0  0:00:08  0:00:02  0:00:06  136M 46 1127M   46  525M    0     0   138M      0  0:00:08  0:00:03  0:00:05  138M 57 1127M   57  646M    0     0   135M      0  0:00:08  0:00:04  0:00:04  135M 71 1127M   71  806M    0     0   139M      0  0:00:08  0:00:05  0:00:03  154M 88 1127M   88  997M    0     0   146M      0  0:00:07  0:00:06  0:00:01  150M100 1127M  100 1127M    0     0   150M      0  0:00:07  0:00:07 --:--:--  159M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  107M  100  107M    0     0  90.2M      0  0:00:01  0:00:01 --:--:-- 90.3M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100  139M  100  139M    0     0   131M      0  0:00:01  0:00:01 --:--:--  132M
echo "finished downloading gene"
finished downloading gene

### NOTE: There has been a timeout when downloading data, do by hand
#echo "downloading goext"
#cd $SRC_BASE/goext/script; sh download.sh
#echo "finished downloading goext"

### NOTE: Update genome build versions in env.sh to most current.
echo "downloading ucsc"
downloading ucsc
cd $SRC_BASE/ucsc/script; sh download.sh 
download.sh: 21: cd: can't cd to ../human/current
